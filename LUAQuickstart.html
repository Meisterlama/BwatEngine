

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>LUA &mdash; BwatEngine  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Coordinator" href="ECS/Coordinator.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> BwatEngine
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="ECSQuickstart.html">ECS</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">LUA</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">BwatEngine</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>LUA</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/LUAQuickstart.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
      
        <a href="ECS/Coordinator.html" class="btn btn-neutral float-left" title="Coordinator" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="lua">
<h1>LUA<a class="headerlink" href="#lua" title="Permalink to this headline">¶</a></h1>
<div class="section" id="getting-started">
<h2>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<p>To start developing gameplay with the Lua API, you should download VS Code ans install the <a class="reference external" href="https://marketplace.visualstudio.com/items?itemName=keyring.Lua">Lua plugin</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The plugins on CLion and VS are a bit of heavy weight and overkill for what’s in place on BwatEngine.</p>
</div>
<p>Currently there is no page where <strong>all</strong> the exposed functions are explained, so you must go through the sources.</p>
<p>The script system currently looks for 2 functions in the script, <cite>Start()</cite> and <cite>Update</cite>. If they exist, they will be
called at the correct time. You can write a script without any of these functions. You can include another script file
like this :</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="n">myScript</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s2">&quot;myscript&quot;</span><span class="p">)</span> <span class="c1">-- Where myscript.lua is located in Assets/script/</span>
</pre></div>
</div>
<p>A sample script might look like this :</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="c1">-- This script translate the attached entity up and down with the keyboard</span>
<span class="n">components</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s2">&quot;components&quot;</span><span class="p">)</span>
<span class="n">input</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s2">&quot;input&quot;</span><span class="p">)</span>
<span class="n">logger</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s2">&quot;logger&quot;</span><span class="p">)</span> <span class="c1">-- logger.lua, contains a wrapper to LogDebug</span>
<span class="n">math</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s2">&quot;math&quot;</span><span class="p">)</span>

<span class="kr">function</span> <span class="nf">Start</span><span class="p">()</span> <span class="c1">-- Called the first time the script is executed</span>
    <span class="n">logger</span><span class="p">.</span><span class="n">DebugLog</span><span class="p">(</span><span class="s2">&quot;Starting&quot;</span><span class="p">)</span>
    <span class="n">components</span><span class="p">.</span><span class="n">SetStatic</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span> <span class="c1">-- set the RigidBody as a static one</span>
<span class="kr">end</span>

<span class="c1">-- I am a comment</span>
<span class="kr">function</span> <span class="nf">Update</span><span class="p">()</span> <span class="c1">-- Called on every update of the scriptSystem</span>
    <span class="kd">local</span> <span class="n">transform</span> <span class="o">=</span> <span class="n">components</span><span class="p">.</span><span class="n">GetTransform</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span> <span class="c1">-- Returns a reference</span>
    <span class="kr">if</span> <span class="n">input</span><span class="p">.</span><span class="n">GetKeyboard</span><span class="p">(</span><span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="kr">then</span>
        <span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">Y</span> <span class="o">=</span> <span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">Y</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="kr">elseif</span> <span class="n">input</span><span class="p">.</span><span class="n">GetKeyboard</span><span class="p">(</span><span class="s2">&quot;s&quot;</span><span class="p">)</span> <span class="kr">then</span>
        <span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">Y</span> <span class="o">=</span> <span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">Y</span> <span class="o">-</span> <span class="mi">1</span>
    <span class="kr">end</span>
<span class="kr">end</span>
</pre></div>
</div>
<p><cite>entity</cite> is defined by the ScriptSystem right before executing the script. It is defined globally in the lua environment
and correspond to the ID of the entity which script is being executed</p>
<p>The files you’re interested in to see the API are located at Engine/src/Scripting.
The functions are registered in the functions <cite>open_&lt;module&gt;()</cite> at the end of the related .cpp file.
They are written as a macro <cite>REGISTER_FUNC()</cite> or as <cite>module.set_function()</cite>.</p>
</div>
<div class="section" id="common-cpp">
<h2>common.cpp<a class="headerlink" href="#common-cpp" title="Permalink to this headline">¶</a></h2>
<p>Contains various functions that currently doesn’t fit in a specific module (Such as creating an entity and logging)</p>
</div>
<div class="section" id="components-cpp">
<h2>components.cpp<a class="headerlink" href="#components-cpp" title="Permalink to this headline">¶</a></h2>
<p>Contains all the functions related to the ECS’s components. Each function takes the entity’s ID as first argument.
The functions name are the same as their C++ equivalent ones (subject to change if some overlapping happen).
Those functions don’t check if the entity have the component before getting it (i.e. it will crash the script if the
entity doesn’t have the required component)</p>
</div>
<div class="section" id="input-cpp">
<h2>input.cpp<a class="headerlink" href="#input-cpp" title="Permalink to this headline">¶</a></h2>
<p>Contains all the functions related to inputs. The functions are the same as in C++ except that the enum is changed for a
string.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">InputHandler</span><span class="o">::</span><span class="n">GetKeyboard</span><span class="p">(</span><span class="n">KEY_W</span><span class="p">);</span>
</pre></div>
</div>
<p>becomes</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="n">input</span><span class="p">.</span><span class="n">GetKeyboard</span><span class="p">(</span><span class="s2">&quot;w&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="math-cpp">
<h2>math.cpp<a class="headerlink" href="#math-cpp" title="Permalink to this headline">¶</a></h2>
<p>This module is quite edgy. Lua have a standard module for math functions, but BwatEngine overrides it to expose its
math related structs and functions. The different plugins will hint you to autocomplete with those functions, <strong>but they
are not exposed</strong>. The defined functions are the same as the BwatEngine math library, with the same names.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="ECS/Coordinator.html" class="btn btn-neutral float-left" title="Coordinator" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Baptiste, William, Amelie, Theo.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>