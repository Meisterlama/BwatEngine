

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>ECS &mdash; BwatEngine  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Coordinator" href="ECS/Coordinator.html" />
    <link rel="prev" title="Welcome to BwatEngine’s documentation!" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> BwatEngine
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">ECS</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ECS/Coordinator.html">Coordinator</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">BwatEngine</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>ECS</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/ECSQuickstart.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="ECS/Coordinator.html" class="btn btn-neutral float-right" title="Coordinator" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to BwatEngine’s documentation!" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="ecs">
<h1>ECS<a class="headerlink" href="#ecs" title="Permalink to this headline">¶</a></h1>
<div class="section" id="getting-started">
<h2>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<p>Everything works with the Coordinator</p>
<dl class="cpp class">
<dt id="_CPPv4N10BwatEngine11CoordinatorE">
<span id="_CPPv3N10BwatEngine11CoordinatorE"></span><span id="_CPPv2N10BwatEngine11CoordinatorE"></span><span id="BwatEngine::Coordinator"></span><span class="target" id="classBwatEngine_1_1Coordinator"></span><em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">Coordinator</span></code><br /></dt>
<dd><p>Singleton managing everything related to the ECS. </p>
</dd></dl>

<p>To operate, you need to register each components and systems needed for the engine like this :</p>
<div class="highlight-cpp notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// Cache the instance</span>
<span class="n">Coordinator</span><span class="o">&amp;</span> <span class="n">coordinator</span> <span class="o">=</span> <span class="n">Coordinator</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">();</span>

<span class="c1">// Register the components required by PhysicsSystem</span>
<span class="n">coordinator</span><span class="p">.</span><span class="n">RegisterComponent</span><span class="o">&lt;</span><span class="n">TransformComponent</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">coordinator</span><span class="p">.</span><span class="n">RegisterComponent</span><span class="o">&lt;</span><span class="n">RigidBodyComponent</span><span class="o">&gt;</span><span class="p">();</span>

<span class="c1">// Register the system</span>
<span class="n">PhysicsSystem</span><span class="o">*</span> <span class="n">physicsSystem</span> <span class="o">=</span> <span class="o">*</span><span class="n">coordinator</span><span class="p">.</span><span class="n">RegisterSystem</span><span class="o">&lt;</span><span class="n">PhysicsSystem</span><span class="o">&gt;</span><span class="p">();</span>

<span class="c1">// Create the signature for the system</span>
<span class="n">Signature</span> <span class="n">signature</span><span class="p">;</span>
<span class="n">signature</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="n">coordinator</span><span class="p">.</span><span class="n">GetComponentType</span><span class="o">&lt;</span><span class="n">RigidBodyComponent</span><span class="o">&gt;</span><span class="p">());</span>
<span class="n">signature</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="n">coordinator</span><span class="p">.</span><span class="n">GetComponentType</span><span class="o">&lt;</span><span class="n">TransformComponent</span><span class="o">&gt;</span><span class="p">());</span>

<span class="c1">// Set the signature</span>
<span class="n">coordinator</span><span class="p">.</span><span class="n">SetSystemSignature</span><span class="o">&lt;</span><span class="n">PhysicsSystem</span><span class="o">&gt;</span><span class="p">(</span><span class="n">signature</span><span class="p">);</span>

<span class="c1">//Init the system</span>
<span class="n">physicsSystem</span><span class="o">-&gt;</span><span class="n">Init</span><span class="p">();</span>
</pre></div>
</td></tr></table></div>
<p>Now that the system is initialized, its Update function must be called during the main loop</p>
</div>
<div class="section" id="creating-an-entity">
<h2>Creating an Entity<a class="headerlink" href="#creating-an-entity" title="Permalink to this headline">¶</a></h2>
<p>To create entities and add components on them, here is a snippet</p>
<div class="highlight-cpp notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// Create an entity and returns its ID</span>
<span class="n">Entity</span> <span class="n">entity</span> <span class="o">=</span> <span class="n">coordinator</span><span class="p">.</span><span class="n">CreateEntity</span><span class="p">();</span>

<span class="c1">// Adding components</span>
<span class="n">coordinator</span><span class="p">.</span><span class="n">AddComponent</span><span class="o">&lt;</span><span class="n">TransformComponent</span><span class="o">&gt;</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span>
            <span class="p">{</span>
                <span class="n">Math</span><span class="o">::</span><span class="n">Vec3f</span><span class="p">{</span><span class="mf">0.f</span><span class="p">,</span> <span class="mf">0.f</span><span class="p">,</span> <span class="mf">0.f</span><span class="p">}</span> <span class="c1">// position</span>
                <span class="n">Math</span><span class="o">::</span><span class="n">Vec3f</span><span class="p">{</span><span class="mf">0.f</span><span class="p">,</span> <span class="mf">0.f</span><span class="p">,</span> <span class="mf">0.f</span><span class="p">}</span> <span class="c1">// rotation</span>
                <span class="n">Math</span><span class="o">::</span><span class="n">Vec3f</span><span class="p">{</span><span class="mf">1.f</span><span class="p">,</span> <span class="mf">1.f</span><span class="p">,</span> <span class="mf">1.f</span><span class="p">}</span> <span class="c1">// scale</span>
            <span class="p">});</span>
<span class="n">coordinator</span><span class="p">.</span><span class="n">AddComponent</span><span class="o">&lt;</span><span class="n">RigidBodyComponent</span><span class="o">&gt;</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span>
            <span class="p">{</span>
                <span class="n">Math</span><span class="o">::</span><span class="n">Vec3f</span><span class="p">{</span><span class="mf">0.f</span><span class="p">,</span> <span class="mf">0.f</span><span class="p">,</span> <span class="mf">0.f</span><span class="p">}</span> <span class="c1">// velocity</span>
                <span class="n">Math</span><span class="o">::</span><span class="n">Vec3f</span><span class="p">{</span><span class="mf">0.f</span><span class="p">,</span> <span class="mf">0.f</span><span class="p">,</span> <span class="mf">0.f</span><span class="p">}</span> <span class="c1">// acceleration</span>
            <span class="p">});</span>
</pre></div>
</td></tr></table></div>
<p>Now this entity has a Transform and a RigidBody. Because its signature corresponds to the signature
of the system we initialized just before, its ID will be passed through the system on the update,
performing the relevant code of the update function.</p>
</div>
<div class="section" id="creating-a-component">
<h2>Creating a Component<a class="headerlink" href="#creating-a-component" title="Permalink to this headline">¶</a></h2>
<p>You can just create a simple struct</p>
<p>Example of a boiler-plate RigidBody :</p>
<div class="highlight-cpp notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="n">BwatEngine</span>
<span class="p">{</span>
    <span class="k">struct</span> <span class="nc">RigidBodyComponent</span>
    <span class="p">{</span>
        <span class="n">Math</span><span class="o">::</span><span class="n">Vec3f</span> <span class="n">velocity</span><span class="p">;</span>
        <span class="n">Math</span><span class="o">::</span><span class="n">Vec3f</span> <span class="n">acceleration</span><span class="p">;</span>
    <span class="p">};</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="creating-a-system">
<h2>Creating a System<a class="headerlink" href="#creating-a-system" title="Permalink to this headline">¶</a></h2>
<p>To create a system, you must create a class that inherits from System
and implement the Init and Update functions.</p>
<p>Example of a boiler-plate PhysicsSystem</p>
<div class="highlight-cpp notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">PhysicsSystem</span> <span class="o">:</span> <span class="k">public</span> <span class="n">System</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="kt">void</span> <span class="n">Init</span><span class="p">()</span> <span class="p">{};</span>

    <span class="kt">void</span> <span class="nf">Update</span><span class="p">(</span><span class="kt">float</span> <span class="n">dt</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">const</span> <span class="n">Vec3f</span> <span class="n">gravity</span><span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">-10</span><span class="p">,</span> <span class="mi">0</span><span class="p">};</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">Entity</span> <span class="nl">entityID</span> <span class="p">:</span> <span class="n">entities</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Coordinator</span><span class="o">&amp;</span> <span class="n">coordinator</span> <span class="o">=</span> <span class="n">Coordinator</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">();</span>
            <span class="k">auto</span><span class="o">&amp;</span> <span class="n">rigidBody</span> <span class="o">=</span> <span class="n">coordinator</span><span class="p">.</span><span class="n">GetComponent</span><span class="o">&lt;</span><span class="n">RigidBodyComponent</span><span class="o">&gt;</span><span class="p">(</span><span class="n">entityID</span><span class="p">);</span>
            <span class="k">auto</span><span class="o">&amp;</span> <span class="n">transform</span> <span class="o">=</span> <span class="n">coordinator</span><span class="p">.</span><span class="n">GetComponent</span><span class="o">&lt;</span><span class="n">TransformComponent</span><span class="o">&gt;</span><span class="p">(</span><span class="n">entityID</span><span class="p">);</span>

            <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="o">+=</span> <span class="n">rigidBody</span><span class="p">.</span><span class="n">velocity</span> <span class="o">*</span> <span class="n">dt</span><span class="p">;</span>
            <span class="n">rigidBody</span><span class="p">.</span><span class="n">velocity</span> <span class="o">+=</span> <span class="n">gravity</span> <span class="o">*</span> <span class="n">dt</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">};</span>
<span class="p">};</span>
</pre></div>
</td></tr></table></div>
<p>Referenced headers</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="ECS/Coordinator.html">Coordinator</a></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="ECS/Coordinator.html" class="btn btn-neutral float-right" title="Coordinator" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to BwatEngine’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Baptiste, William, Amelie, Theo.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>